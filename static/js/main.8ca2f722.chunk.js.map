{"version":3,"sources":["components/PostsList/PostsList.tsx","components/Loader/Loader.tsx","utils/fetchClient.ts","utils/commentsApi.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","components/UserSelector/UserSelector.tsx","App.tsx","utils/getUsers.ts","utils/getPosts.ts","index.tsx"],"names":["PostsList","posts","handlePostInfo","useState","currentPostId","setCurrentPostId","useEffect","className","map","post","id","title","type","classNames","onClick","postId","prevState","Loader","BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","body","JSON","stringify","headers","then","fetch","response","json","client","deleteComments","commentId","IconError","ErrorMessage","fieldStatus","hasName","hasEmail","hasComment","NewCommentForm","onAddComment","nameValue","setNameValue","emailValue","setEmailValue","commentValue","setCommentValue","isLoading","setIsLoading","hasError","setHasError","hasInputValue","setHasInputValue","handleInputChange","event","target","name","value","addNewComment","a","email","addedComment","onSubmit","preventDefault","length","htmlFor","placeholder","onChange","PostDetails","selectedPost","comments","setComments","buttonHidden","setButtonHidden","removeError","setIsRemoveError","getPostsComments","commentFromServer","commentRemove","filter","comment","handleCommentRemove","href","newComment","UserSelector","users","currentUser","setCurrentUser","isOpen","setIsOpen","onFocus","onBlur","onMouseDown","stopPropagation","role","tabIndex","user","handleUserSelection","App","setUsers","selectedUser","setSelectedUser","setPosts","setSelectedPost","sidebarOpen","setSidebarOpen","loadUsers","userFromServer","getPostsList","userId","postsFromServer","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8ca2f722.chunk.js","sourcesContent":["import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { Post } from '../../types/Post';\n\ntype Props = {\n  posts: Post[];\n  handlePostInfo: (postId: number) => void;\n};\n\nexport const PostsList: React.FC<Props> = ({ posts, handlePostInfo }) => {\n  const [currentPostId, setCurrentPostId] = useState(0);\n\n  const handleOnClick = (postId: number) => {\n    setCurrentPostId(prevState => {\n      if (prevState === postId) {\n        return 0;\n      }\n\n      return postId;\n    });\n  };\n\n  useEffect(() => {\n    handlePostInfo(currentPostId);\n  }, [currentPostId]);\n\n  return (\n    <div data-cy=\"PostsList\">\n      <p className=\"title\">Posts:</p>\n\n      <table className=\"table is-fullwidth is-striped is-hoverable is-narrow\">\n        <thead>\n          <tr className=\"has-background-link-light\">\n            <th>#</th>\n            <th>Title</th>\n            <th> </th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {posts && (\n            posts.map(post => {\n              const { id, title } = post;\n\n              return (\n                <tr data-cy=\"Post\" key={id}>\n                  <td data-cy=\"PostId\">{id}</td>\n\n                  <td data-cy=\"PostTitle\">\n                    {title}\n                  </td>\n\n                  <td className=\"has-text-right is-vcentered\">\n                    <button\n                      type=\"button\"\n                      data-cy=\"PostButton\"\n                      className={classNames(\n                        'button',\n                        'is-link',\n                        { 'is-light': id !== currentPostId },\n                      )}\n                      onClick={() => handleOnClick(id)}\n                    >\n                      {(currentPostId === id) ? 'Close' : 'Open'}\n                    </button>\n                  </td>\n                </tr>\n              );\n            })\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\" data-cy=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","const BASE_URL = 'https://mate.academy/students-api';\n\n// a promise resolved after a given delay\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\n// To have autocompletion and avoid mistypes\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  data: any = null, // we can send any data to the server\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    // We add body and Content-Type only for the requests with data\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  // for a demo purpose we emulate a delay to see if Loaders work\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => response.json());\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  post: <T>(url: string, data: any) => request<T>(url, 'POST', data),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import { Comment, CommentData } from '../types/Comment';\nimport { client } from './fetchClient';\n\nexport const getComments = (postId: number) => {\n  return client.get<Comment[]>(`/comments?postId=${postId}`);\n};\n\nexport const postComments = (data: CommentData) => {\n  return client.post<Comment>('/comments', data);\n};\n\nexport const deleteComments = (commentId: number) => {\n  return client.delete(`/comments/${commentId}`);\n};\n","import classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { Comment } from '../../types/Comment';\nimport { postComments } from '../../utils/commentsApi';\n\nexport const IconError: React.FC = () => (\n  <span\n    className=\"icon is-small is-right has-text-danger\"\n    data-cy=\"ErrorIcon\"\n  >\n    <i className=\"fas fa-exclamation-triangle\" />\n  </span>\n);\n\nexport const ErrorMessage: React.FC<{ title: string }> = ({ title }) => (\n  <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n    {title}\n  </p>\n);\n\ntype Props = {\n  postId: number;\n  onAddComment: (comment: Comment) => void;\n};\n\nconst fieldStatus = {\n  hasName: true,\n  hasEmail: true,\n  hasComment: true,\n};\n\nexport const NewCommentForm: React.FC<Props> = ({ postId, onAddComment }) => {\n  const [nameValue, setNameValue] = useState('');\n  const [emailValue, setEmailValue] = useState('');\n  const [commentValue, setCommentValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const [hasInputValue, setHasInputValue] = useState(fieldStatus);\n\n  const handleInputChange = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    const { name, value } = event.target;\n\n    switch (name) {\n      case 'name':\n        setHasInputValue(prevState => ({\n          ...prevState,\n          hasName: true,\n        }));\n        setNameValue(value);\n        break;\n\n      case 'email':\n        setHasInputValue(prevState => ({\n          ...prevState,\n          hasEmail: true,\n        }));\n        setEmailValue(value);\n        break;\n\n      case 'body':\n        setHasInputValue(prevState => ({\n          ...prevState,\n          hasComment: true,\n        }));\n        setCommentValue(value);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const addNewComment = async () => {\n    try {\n      setIsLoading(true);\n      setHasError(false);\n\n      const addedComment = await postComments({\n        postId,\n        name: nameValue,\n        email: emailValue,\n        body: commentValue,\n      });\n\n      onAddComment(addedComment);\n      setIsLoading(false);\n      setCommentValue('');\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSubmitForm = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    if (!nameValue || !emailValue || !commentValue) {\n      setHasInputValue(() => ({\n        hasName: !!nameValue,\n        hasEmail: !!emailValue.length,\n        hasComment: !!commentValue.length,\n      }));\n\n      return;\n    }\n\n    addNewComment();\n  };\n\n  const handleClearForm = () => {\n    setNameValue('');\n    setEmailValue('');\n    setCommentValue('');\n    setHasInputValue(fieldStatus);\n  };\n\n  return (\n    <form data-cy=\"NewCommentForm\" onSubmit={handleSubmitForm}>\n      <div className=\"field\" data-cy=\"NameField\">\n        <label className=\"label\" htmlFor=\"comment-author-name\">\n          Author Name\n        </label>\n\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"comment-author-name\"\n            placeholder=\"Name Surname\"\n            className={classNames(\n              'input',\n              { 'is-danger': !hasInputValue.hasName },\n            )}\n            value={nameValue}\n            onChange={handleInputChange}\n          />\n\n          <span className=\"icon is-small is-left\">\n            <i className=\"fas fa-user\" />\n          </span>\n          {!hasInputValue.hasName && <IconError />}\n        </div>\n        {!hasInputValue.hasName && <ErrorMessage title=\"Name is required\" />}\n\n      </div>\n\n      <div className=\"field\" data-cy=\"EmailField\">\n        <label className=\"label\" htmlFor=\"comment-author-email\">\n          Author Email\n        </label>\n\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            type=\"text\"\n            name=\"email\"\n            id=\"comment-author-email\"\n            placeholder=\"email@test.com\"\n            className={classNames(\n              'input',\n              { 'is-danger': !hasInputValue.hasEmail },\n            )}\n            value={emailValue}\n            onChange={handleInputChange}\n          />\n\n          <span className=\"icon is-small is-left\">\n            <i className=\"fas fa-envelope\" />\n          </span>\n          {!hasInputValue.hasEmail && <IconError />}\n        </div>\n        {!hasInputValue.hasEmail && <ErrorMessage title=\"Email is required\" />}\n      </div>\n\n      <div className=\"field\" data-cy=\"BodyField\">\n        <label className=\"label\" htmlFor=\"comment-body\">\n          Comment Text\n        </label>\n\n        <div className=\"control\">\n          <textarea\n            id=\"comment-body\"\n            name=\"body\"\n            placeholder=\"Type comment here\"\n            className={classNames(\n              'input',\n              { 'is-danger': !hasInputValue.hasComment },\n            )}\n            value={commentValue}\n            onChange={handleInputChange}\n          />\n        </div>\n        {!hasInputValue.hasComment && <ErrorMessage title=\"Enter some text\" />}\n      </div>\n\n      <div className=\"field is-grouped\">\n        <div className=\"control\">\n          <button\n            type=\"submit\"\n            className={classNames(\n              'button',\n              'is-link',\n              { 'is-loading': isLoading },\n            )}\n          >\n            Add\n          </button>\n        </div>\n\n        <div className=\"control\">\n          {/* eslint-disable-next-line react/button-has-type */}\n          <button\n            type=\"reset\"\n            className=\"button is-link is-light\"\n            onClick={handleClearForm}\n          >\n            Clear\n          </button>\n        </div>\n\n        {hasError && (\n          <div\n            className=\"notification is-danger\"\n            data-cy=\"PostsLoadingError\"\n          >\n            Unable to add a new comment. Try again!\n          </div>\n        )}\n      </div>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { Comment } from '../../types/Comment';\nimport { Post } from '../../types/Post';\nimport { Loader } from '../Loader';\nimport { NewCommentForm } from '../NewCommentForm';\nimport { getComments, deleteComments } from '../../utils/commentsApi';\n\ntype Props = {\n  selectedPost: Post;\n};\n\nexport const PostDetails: React.FC<Props> = ({\n  selectedPost: {\n    id,\n    title,\n    body,\n  },\n}) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [hasError, setHasError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [buttonHidden, setButtonHidden] = useState(false);\n  const [removeError, setIsRemoveError] = useState(false);\n\n  const getPostsComments = async () => {\n    try {\n      setHasError(false);\n      setIsLoading(true);\n      setButtonHidden(false);\n\n      const commentFromServer = await getComments(id);\n\n      setComments(commentFromServer);\n      setIsLoading(false);\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddComment = (newComment: Comment) => {\n    setComments(prevState => {\n      if (prevState.length) {\n        return [...prevState, newComment];\n      }\n\n      return [newComment];\n    });\n  };\n\n  const commentRemove = (commentId: number) => {\n    setComments(prevState => {\n      if (prevState) {\n        return comments.filter(comment => comment.id !== commentId);\n      }\n\n      return [];\n    });\n  };\n\n  const handleCommentRemove = async (commentId: number) => {\n    try {\n      setIsRemoveError(false);\n      commentRemove(commentId);\n      await deleteComments(commentId);\n    } catch {\n      setIsRemoveError(true);\n\n      setTimeout(() => {\n        setIsRemoveError(false);\n      }, 2000);\n    }\n  };\n\n  useEffect(() => {\n    getPostsComments();\n  }, [id]);\n\n  return (\n    <div className=\"content\" data-cy=\"PostDetails\">\n      <div className=\"content\" data-cy=\"PostDetails\">\n        <div className=\"block\">\n          <h2 data-cy=\"PostTitle\">\n            {`#${id}: ${title}`}\n          </h2>\n\n          <p data-cy=\"PostBody\">\n            {body}\n          </p>\n        </div>\n\n        <div className=\"block\">\n          {isLoading && <Loader />}\n\n          {hasError && (\n            <div className=\"notification is-danger\" data-cy=\"CommentsError\">\n              Something went wrong\n            </div>\n          )}\n          {!isLoading && !hasError && (\n            !comments.length\n              ? (\n                <>\n                  <p className=\"title is-4\" data-cy=\"NoCommentsMessage\">\n                    No comments yet\n                  </p>\n\n                  {!buttonHidden && (\n                    <button\n                      data-cy=\"WriteCommentButton\"\n                      type=\"button\"\n                      className=\"button is-link\"\n                      onClick={() => setButtonHidden(true)}\n                    >\n                      Write a comment\n                    </button>\n                  )}\n                </>\n              ) : (\n                <>\n                  <p className=\"title is-4\">Comments:</p>\n                  {comments.map(comment => (\n                    <article\n                      className=\"message is-small\"\n                      data-cy=\"Comment\"\n                      key={comment.id}\n                    >\n                      <div className=\"message-header\">\n                        <a href={`mailto:${comment.email}`} data-cy=\"CommentAuthor\">\n                          {comment.name}\n                        </a>\n                        <button\n                          data-cy=\"CommentDelete\"\n                          type=\"button\"\n                          className=\"delete is-small\"\n                          aria-label=\"delete\"\n                          onClick={() => handleCommentRemove(comment.id)}\n                        >\n                          delete button\n                        </button>\n                      </div>\n\n                      <div className=\"message-body\" data-cy=\"CommentBody\">\n                        {comment.body}\n                      </div>\n                    </article>\n                  ))}\n\n                  {!buttonHidden && (\n                    <button\n                      data-cy=\"WriteCommentButton\"\n                      type=\"button\"\n                      className=\"button is-link\"\n                      onClick={() => setButtonHidden(true)}\n                    >\n                      Write a comment\n                    </button>\n                  )}\n                </>\n              )\n          )}\n        </div>\n\n        {buttonHidden && (\n          <NewCommentForm postId={id} onAddComment={handleAddComment} />\n        )}\n\n        {removeError && (\n          <div\n            className=\"notification is-danger\"\n            data-cy=\"PostsLoadingError\"\n          >\n            Something went wrong!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { User } from '../../types/User';\n\ntype Props = {\n  users: User[];\n  onChange: (user: User) => void;\n};\n\nexport const UserSelector: React.FC<Props> = ({ users, onChange }) => {\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleClick = (event: React.MouseEvent) => {\n    if (!isOpen) {\n      setIsOpen(true);\n\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const handleUserSelection = (\n    event: React.MouseEvent<HTMLAnchorElement>,\n    user: User,\n  ) => {\n    event.preventDefault();\n    onChange(user);\n    setCurrentUser(user);\n    setIsOpen(prevState => !prevState);\n  };\n\n  return (\n    <div\n      data-cy=\"UserSelector\"\n      className={classNames('dropdown', { 'is-active': isOpen })}\n      onFocus={() => setIsOpen(true)}\n      onBlur={() => setIsOpen(false)}\n      onMouseDown={handleClick}\n      role=\"button\"\n      tabIndex={0}\n    >\n      <div className=\"dropdown-trigger\">\n        <button\n          type=\"button\"\n          className=\"button\"\n          aria-haspopup=\"true\"\n          aria-controls=\"dropdown-menu\"\n          onMouseDown={() => setIsOpen(prevState => !prevState)}\n        >\n          <span>{currentUser ? currentUser.name : 'Choose a user'}</span>\n\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-angle-down\" aria-hidden=\"true\" />\n          </span>\n        </button>\n      </div>\n\n      <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n        <div className=\"dropdown-content\">\n          {users.map(user => (\n            <a\n              href={`#user-${user.id}`}\n              className={\n                classNames('dropdown-item',\n                  { 'is-active': currentUser?.id === user.id })\n              }\n              key={user.id}\n              onClick={(event) => handleUserSelection(event, user)}\n            >\n              {user.name}\n            </a>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport 'bulma/bulma.sass';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport './App.scss';\n\nimport classNames from 'classnames';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { UserSelector } from './components/UserSelector';\nimport { Loader } from './components/Loader';\nimport { User } from './types/User';\nimport { getUsers } from './utils/getUsers';\nimport { getPosts } from './utils/getPosts';\nimport { Post } from './types/Post';\n\nexport const App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [posts, setPosts] = useState<Post[] | null>(null);\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const loadUsers = async () => {\n    try {\n      setHasError(false);\n\n      const userFromServer = await getUsers();\n\n      setUsers(userFromServer);\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getPostsList = async (user : User) => {\n    try {\n      setIsLoading(true);\n      setHasError(false);\n      setSelectedUser(null);\n\n      const postsFromServer = await getPosts(user.id);\n\n      setSelectedUser(user);\n      setPosts(postsFromServer);\n      setIsLoading(false);\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handlePostInfo = (postId: number) => {\n    if (posts) {\n      setSelectedPost(posts.find(post => post.id === postId) || null);\n    }\n\n    setSidebarOpen(postId !== 0);\n  };\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  return (\n    <main className=\"section\">\n      <div className=\"container\">\n        <div className=\"tile is-ancestor\">\n          <div className=\"tile is-parent\">\n            <div className=\"tile is-child box is-success\">\n              <div className=\"block\">\n                <UserSelector users={users} onChange={getPostsList} />\n              </div>\n\n              <div className=\"block\" data-cy=\"MainContent\">\n                {(!selectedUser && !isLoading && !hasError) && (\n                  <p data-cy=\"NoSelectedUser\">\n                    No user selected\n                  </p>\n                )}\n\n                {(isLoading && !hasError) && (\n                  <Loader />\n                )}\n\n                {(hasError && !isLoading) && (\n                  <div\n                    className=\"notification is-danger\"\n                    data-cy=\"PostsLoadingError\"\n                  >\n                    Something went wrong!\n                  </div>\n                )}\n\n                {selectedUser && (\n                  posts?.length\n                    ? (\n                      <PostsList\n                        posts={posts}\n                        handlePostInfo={handlePostInfo}\n                      />\n                    ) : (\n                      <div\n                        className=\"notification is-warning\"\n                        data-cy=\"NoPostsYet\"\n                      >\n                        No posts yet\n                      </div>\n                    )\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div\n            data-cy=\"Sidebar\"\n            className={classNames(\n              'tile',\n              'is-parent',\n              'is-8-desktop',\n              'Sidebar',\n              { 'Sidebar--open': sidebarOpen },\n            )}\n          >\n            <div className=\"tile is-child box is-success\">\n              {selectedPost && <PostDetails selectedPost={selectedPost} />}\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n","import { User } from '../types/User';\nimport { client } from './fetchClient';\n\nexport const getUsers = () => {\n  return client.get<User[]>('/users');\n};\n","import { Post } from '../types/Post';\nimport { client } from './fetchClient';\n\nexport const getPosts = (userId: number) => {\n  return client.get<Post[]>(`/posts?userId=${userId}`);\n};\n","import ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}